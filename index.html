<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>GreedyShow</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    :root {
      --bg: #0a0e27;
      --bg-light: #151b3d;
      --panel: #1a2140;
      --accent: #6366f1;
      --accent-light: #818cf8;
      --accent-dark: #4f46e5;
      --success: #10b981;
      --success-light: #34d399;
      --danger: #ef4444;
      --text: #f3f4f6;
      --text-muted: #9ca3af;
      --border: rgba(255, 255, 255, 0.1);
      --shadow: rgba(0, 0, 0, 0.3);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, var(--bg) 0%, #0f1633 100%);
      color: var(--text);
      min-height: 100vh;
      padding: 20px;
      padding-top: 80px;
    }

    /* Floating Menu Button */
    .menu-btn {
      position: fixed;
      top: 20px;
      left: 20px;
      width: 50px;
      height: 50px;
      background: linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%);
      border: none;
      border-radius: 15px;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 5px;
      z-index: 1000;
      box-shadow: 0 8px 24px rgba(99, 102, 241, 0.3);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .menu-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 32px rgba(99, 102, 241, 0.4);
    }

    .menu-btn:active {
      transform: scale(0.95);
    }

    .menu-btn span {
      width: 24px;
      height: 3px;
      background: white;
      border-radius: 2px;
      transition: all 0.3s ease;
    }

    .menu-btn.active span:nth-child(1) {
      transform: rotate(45deg) translate(7px, 7px);
    }

    .menu-btn.active span:nth-child(2) {
      opacity: 0;
    }

    .menu-btn.active span:nth-child(3) {
      transform: rotate(-45deg) translate(7px, -7px);
    }

    /* Menu Modal */
    .menu-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(10px);
      z-index: 999;
      display: none;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .menu-modal.active {
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 1;
    }

    .menu-content {
      background: linear-gradient(135deg, var(--panel) 0%, var(--bg-light) 100%);
      border-radius: 24px;
      padding: 32px;
      max-width: 400px;
      width: 90%;
      box-shadow: 0 20px 60px var(--shadow);
      transform: scale(0.9);
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .menu-modal.active .menu-content {
      transform: scale(1);
    }

    .menu-header {
      text-align: center;
      margin-bottom: 28px;
    }

    .menu-header h2 {
      font-size: 24px;
      background: linear-gradient(135deg, var(--accent-light) 0%, var(--success-light) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 8px;
    }

    .menu-header p {
      color: var(--text-muted);
      font-size: 14px;
    }

    .pack-options {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-bottom: 20px;
    }

    .pack-option {
      background: rgba(255, 255, 255, 0.05);
      border: 2px solid var(--border);
      border-radius: 16px;
      padding: 18px;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .pack-option::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(99, 102, 241, 0.1), transparent);
      transition: left 0.5s ease;
    }

    .pack-option:hover::before {
      left: 100%;
    }

    .pack-option:hover {
      border-color: var(--accent);
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(99, 102, 241, 0.2);
    }

    .pack-option.selected {
      border-color: var(--accent);
      background: linear-gradient(135deg, rgba(99, 102, 241, 0.15) 0%, rgba(16, 185, 129, 0.1) 100%);
    }

    .pack-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }

    .pack-title {
      font-size: 18px;
      font-weight: 600;
    }

    .pack-reward {
      background: linear-gradient(135deg, var(--success) 0%, var(--success-light) 100%);
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 14px;
      font-weight: 700;
    }

    .pack-desc {
      color: var(--text-muted);
      font-size: 13px;
    }

    .menu-actions {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .menu-actions .action-row {
      display: flex;
      gap: 12px;
    }

    .menu-actions .action-row button {
      flex: 1;
    }

    .menu-actions button {
      padding: 14px;
      border: none;
      border-radius: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%);
      color: white;
    }

    .btn-primary:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(99, 102, 241, 0.3);
    }

    .btn-primary:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .btn-secondary {
      background: rgba(255, 255, 255, 0.05);
      color: var(--text);
      border: 1px solid var(--border);
    }

    .btn-secondary:hover {
      background: rgba(255, 255, 255, 0.1);
    }

    .btn-support {
      background: rgba(99, 102, 241, 0.15);
      color: var(--accent-light);
      border: 1px solid var(--accent);
    }

    .btn-support:hover {
      background: rgba(99, 102, 241, 0.25);
      transform: translateY(-2px);
    }

    /* Adaptive SVG Icons */
    .icon {
      width: 20px;
      height: 20px;
      fill: currentColor;
    }

    .icon-lg {
      width: 24px;
      height: 24px;
    }

    /* Main Content */
    .container {
      max-width: 600px;
      margin: 0 auto;
    }

    .page {
      display: none;
    }

    .page.active {
      display: block;
      animation: fadeIn 0.4s ease;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .header {
      text-align: center;
      margin-bottom: 32px;
    }

    .logo {
      font-size: 36px;
      font-weight: 800;
      background: linear-gradient(135deg, var(--accent-light) 0%, var(--success-light) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 8px;
    }

    .subtitle {
      color: var(--text-muted);
      font-size: 16px;
    }

    .card {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.02) 100%);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 24px;
      margin-bottom: 20px;
      box-shadow: 0 8px 32px var(--shadow);
      transition: all 0.3s ease;
    }

    .card:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 40px var(--shadow);
    }

    .balance-card {
      text-align: center;
      padding: 32px 24px;
      background: linear-gradient(135deg, var(--panel) 0%, var(--bg-light) 100%);
    }

    .balance-header {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      margin-bottom: 16px;
    }

    .ton-icon {
      width: 48px;
      height: 48px;
      background: linear-gradient(135deg, var(--accent) 0%, var(--success) 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      animation: pulse 2s infinite;
      font-weight: 700;
      color: white;
    }

    @keyframes pulse {
      0%, 100% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.05);
      }
    }

    .balance-label {
      font-size: 14px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .balance-amount {
      font-size: 48px;
      font-weight: 800;
      background: linear-gradient(135deg, var(--accent-light) 0%, var(--success-light) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-top: 8px;
    }

    .wallet-actions {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .btn {
      width: 100%;
      padding: 16px;
      border: none;
      border-radius: 14px;
      font-weight: 600;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .btn-wallet {
      background: linear-gradient(135deg, var(--success) 0%, var(--success-light) 100%);
      color: white;
    }

    .btn-wallet:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(16, 185, 129, 0.3);
    }

    .btn-danger {
      background: linear-gradient(135deg, var(--danger) 0%, #f87171 100%);
      color: white;
    }

    .btn-danger:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(239, 68, 68, 0.3);
    }

    .btn-outline {
      background: transparent;
      border: 2px solid var(--border);
      color: var(--text);
    }

    .btn-outline:hover:not(:disabled) {
      border-color: var(--accent);
      background: rgba(99, 102, 241, 0.1);
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .info-text {
      text-align: center;
      color: var(--text-muted);
      font-size: 14px;
      margin-top: 16px;
      line-height: 1.5;
    }

    .status-badge {
      display: inline-block;
      padding: 6px 12px;
      border-radius: 8px;
      font-size: 12px;
      font-weight: 600;
      margin-top: 12px;
    }

    .status-connected {
      background: rgba(16, 185, 129, 0.2);
      color: var(--success-light);
    }

    .status-disconnected {
      background: rgba(239, 68, 68, 0.2);
      color: #f87171;
    }

    .wallet-address {
      font-family: 'Courier New', monospace;
      font-size: 13px;
      word-break: break-all;
      padding: 8px 12px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 8px;
      margin-top: 8px;
    }

    .support-link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 12px 20px;
      background: linear-gradient(135deg, rgba(99, 102, 241, 0.15) 0%, rgba(16, 185, 129, 0.1) 100%);
      border: 1px solid var(--border);
      border-radius: 12px;
      color: var(--text);
      text-decoration: none;
      font-weight: 600;
      transition: all 0.3s ease;
      margin-top: 20px;
    }

    .support-link:hover {
      transform: translateY(-2px);
      border-color: var(--accent);
      background: linear-gradient(135deg, rgba(99, 102, 241, 0.25) 0%, rgba(16, 185, 129, 0.15) 100%);
    }

    .support-icon {
      font-size: 20px;
    }

    /* Watch Page */
    .ad-container {
      background: rgba(0, 0, 0, 0.3);
      border-radius: 16px;
      padding: 24px;
      text-align: center;
      margin-bottom: 20px;
      min-height: 200px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .ad-placeholder {
      font-size: 48px;
      margin-bottom: 16px;
    }

    .ad-timer {
      font-size: 32px;
      font-weight: 800;
      color: var(--accent-light);
    }

    .progress-bar {
      width: 100%;
      height: 8px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 4px;
      overflow: hidden;
      margin-bottom: 16px;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent) 0%, var(--success) 100%);
      border-radius: 4px;
      transition: width 0.3s ease;
    }

    .stats {
      display: flex;
      justify-content: space-between;
      margin-bottom: 16px;
    }

    .stat-item {
      text-align: center;
    }

    .stat-value {
      font-size: 24px;
      font-weight: 700;
      color: var(--accent-light);
    }

    .stat-label {
      font-size: 12px;
      color: var(--text-muted);
      text-transform: uppercase;
    }

    /* Toast Notification */
    .toast {
      position: fixed;
      bottom: -100px;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(135deg, var(--success) 0%, var(--success-light) 100%);
      color: white;
      padding: 16px 24px;
      border-radius: 12px;
      box-shadow: 0 8px 32px rgba(16, 185, 129, 0.4);
      font-weight: 600;
      z-index: 2000;
      transition: bottom 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .toast.visible {
      bottom: 32px;
    }

    @media (max-width: 480px) {
      body {
        padding: 16px;
        padding-top: 70px;
      }

      .menu-content {
        padding: 24px;
      }

      .balance-amount {
        font-size: 36px;
      }
    }
  </style>
</head>
<body>
  <!-- SVG Icons Sprite -->
  <svg style="display: none;">
    <defs>
      <symbol id="icon-package" viewBox="0 0 24 24">
        <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
        <polyline points="3.27 6.96 12 12.01 20.73 6.96"/>
        <line x1="12" y1="22.08" x2="12" y2="12"/>
      </symbol>
      
      <symbol id="icon-wallet" viewBox="0 0 24 24">
        <path d="M21 12V7H5a2 2 0 0 1 0-4h14v4"/>
        <path d="M3 5v14a2 2 0 0 0 2 2h16v-5"/>
        <path d="M18 12a2 2 0 0 0 0 4h4v-4z"/>
      </symbol>
      
      <symbol id="icon-play" viewBox="0 0 24 24">
        <polygon points="5 3 19 12 5 21 5 3"/>
      </symbol>
      
      <symbol id="icon-check" viewBox="0 0 24 24">
        <polyline points="20 6 9 17 4 12"/>
      </symbol>
      
      <symbol id="icon-tv" viewBox="0 0 24 24">
        <rect x="2" y="7" width="20" height="15" rx="2" ry="2"/>
        <polyline points="17 2 12 7 7 2"/>
      </symbol>
      
      <symbol id="icon-diamond" viewBox="0 0 24 24">
        <path d="M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0z"/>
      </symbol>
      
      <symbol id="icon-link" viewBox="0 0 24 24">
        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
        <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
      </symbol>
      
      <symbol id="icon-unlink" viewBox="0 0 24 24">
        <path d="M18.84 12.25l1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71"/>
        <path d="M5.17 11.75l-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71"/>
        <line x1="8" y1="2" x2="8" y2="5"/>
        <line x1="2" y1="8" x2="5" y2="8"/>
        <line x1="16" y1="19" x2="16" y2="22"/>
        <line x1="19" y1="16" x2="22" y2="16"/>
      </symbol>
      
      <symbol id="icon-money" viewBox="0 0 24 24">
        <line x1="12" y1="1" x2="12" y2="23"/>
        <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
      </symbol>
      
      <symbol id="icon-support" viewBox="0 0 24 24">
        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
      </symbol>
      
      <symbol id="icon-arrow-left" viewBox="0 0 24 24">
        <line x1="19" y1="12" x2="5" y2="12"/>
        <polyline points="12 19 5 12 12 5"/>
      </symbol>
      
      <symbol id="icon-info" viewBox="0 0 24 24">
        <circle cx="12" cy="12" r="10"/>
        <line x1="12" y1="16" x2="12" y2="12"/>
        <line x1="12" y1="8" x2="12.01" y2="8"/>
      </symbol>
      
      <symbol id="icon-target" viewBox="0 0 24 24">
        <circle cx="12" cy="12" r="10"/>
        <circle cx="12" cy="12" r="6"/>
        <circle cx="12" cy="12" r="2"/>
      </symbol>
    </defs>
  </svg>
  <!-- Floating Menu Button -->
  <button class="menu-btn" id="menuBtn">
    <span></span>
    <span></span>
    <span></span>
  </button>

  <!-- Menu Modal -->
  <div class="menu-modal" id="menuModal">
    <div class="menu-content">
      <div class="menu-header">
        <h2>–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞–∫–µ—Ç</h2>
        <p>–°–º–æ—Ç—Ä–∏—Ç–µ —Ä–µ–∫–ª–∞–º—É –∏ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ TON</p>
      </div>

      <div class="pack-options">
        <div class="pack-option" data-ads="100">
          <div class="pack-header">
            <span class="pack-title">
              <svg class="icon icon-lg"><use href="#icon-package"/></svg>
              100 —Ä–µ–∫–ª–∞–º
            </span>
            <span class="pack-reward">2 TON</span>
          </div>
          <p class="pack-desc">–ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –Ω–∞—á–∞–ª–∞</p>
        </div>

        <div class="pack-option" data-ads="200">
          <div class="pack-header">
            <span class="pack-title">
              <svg class="icon icon-lg"><use href="#icon-package"/></svg>
              200 —Ä–µ–∫–ª–∞–º
            </span>
            <span class="pack-reward">4 TON</span>
          </div>
          <p class="pack-desc">–ü–æ–ø—É–ª—è—Ä–Ω—ã–π –≤—ã–±–æ—Ä</p>
        </div>

        <div class="pack-option" data-ads="300">
          <div class="pack-header">
            <span class="pack-title">
              <svg class="icon icon-lg"><use href="#icon-package"/></svg>
              300 —Ä–µ–∫–ª–∞–º
            </span>
            <span class="pack-reward">6 TON</span>
          </div>
          <p class="pack-desc">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –∑–∞—Ä–∞–±–æ—Ç–æ–∫</p>
        </div>
      </div>

      <div class="menu-actions">
        <div class="action-row">
          <button class="btn-primary" id="startWatchBtn" disabled>
            <svg class="icon"><use href="#icon-play"/></svg>
            –ù–∞—á–∞—Ç—å
          </button>
          <button class="btn-secondary" id="openWalletBtn">
            <svg class="icon"><use href="#icon-wallet"/></svg>
            –ö–æ—à–µ–ª—ë–∫
          </button>
        </div>
        <a href="https://t.me/teppuseller" target="_blank" style="text-decoration: none;">
          <button class="btn-support" style="width: 100%;">
            <svg class="icon"><use href="#icon-support"/></svg>
            –ü–æ–¥–¥–µ—Ä–∂–∫–∞
          </button>
        </a>
      </div>
    </div>
  </div>

  <div class="container">
    <!-- Home Page -->
    <div class="page active" id="homePage">
      <div class="header">
        <div class="logo">GreedyShow ‚ú®</div>
        <p class="subtitle">–ó–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π TON, —Å–º–æ—Ç—Ä—è —Ä–µ–∫–ª–∞–º—É</p>
      </div>

      <div class="card">
        <h3 style="margin-bottom: 16px;">üéØ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h3>
        <p style="color: var(--text-muted); line-height: 1.6; margin-bottom: 20px;">
          –í—ã–±–µ—Ä–∏—Ç–µ –ø–∞–∫–µ—Ç —Ä–µ–∫–ª–∞–º—ã –≤ –º–µ–Ω—é (–Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É —Å —Ç—Ä–µ–º—è –ø–æ–ª–æ—Å–∫–∞–º–∏ –≤ –ª–µ–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É), 
          —Å–º–æ—Ç—Ä–∏—Ç–µ —Ä–µ–∫–ª–∞–º—É –∏ –ø–æ–ª—É—á–∞–π—Ç–µ TON –Ω–∞ —Å–≤–æ–π –±–∞–ª–∞–Ω—Å.
        </p>
        <div style="text-align: center;">
          <button class="btn btn-wallet" onclick="openMenu()">
            üì¶ –í—ã–±—Ä–∞—Ç—å –ø–∞–∫–µ—Ç
          </button>
        </div>
      </div>

      <div class="card">
        <h4 style="margin-bottom: 12px;">üí° –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?</h4>
        <ol style="color: var(--text-muted); line-height: 1.8; padding-left: 20px;">
          <li>–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞–∫–µ—Ç —Ä–µ–∫–ª–∞–º—ã</li>
          <li>–°–º–æ—Ç—Ä–∏—Ç–µ —Ä–µ–∫–ª–∞–º–Ω—ã–µ —Ä–æ–ª–∏–∫–∏</li>
          <li>–ü–æ–ª—É—á–∞–π—Ç–µ TON –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</li>
          <li>–í—ã–≤–æ–¥–∏—Ç–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –Ω–∞ –∫–æ—à–µ–ª—ë–∫</li>
        </ol>
      </div>

      <div style="text-align: center;">
        <a href="https://t.me/teppuseller" target="_blank" class="support-link">
          <span class="support-icon">üí¨</span>
          <span>–ü–æ–¥–¥–µ—Ä–∂–∫–∞</span>
        </a>
      </div>
    </div>

    <!-- Watch Page -->
    <div class="page" id="watchPage">
      <div class="header">
        <h2 style="display: flex; align-items: center; gap: 10px;">
          <svg class="icon icon-lg" style="color: var(--accent-light);"><use href="#icon-tv"/></svg>
          –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∫–ª–∞–º—ã
        </h2>
      </div>

      <div class="card">
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill" style="width: 0%"></div>
        </div>

        <div class="stats">
          <div class="stat-item">
            <div class="stat-value" id="viewedCount">0</div>
            <div class="stat-label">–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ</div>
          </div>
          <div class="stat-item">
            <div class="stat-value" id="targetCount">0</div>
            <div class="stat-label">–¶–µ–ª—å</div>
          </div>
          <div class="stat-item">
            <div class="stat-value" id="rewardAmount">0</div>
            <div class="stat-label">–ù–∞–≥—Ä–∞–¥–∞ TON</div>
          </div>
        </div>
      </div>

      <div class="ad-container">
        <div class="ad-placeholder" id="adPlaceholder">
          <svg class="icon" style="width: 64px; height: 64px;"><use href="#icon-tv"/></svg>
        </div>
        <div id="adMessage" style="color: var(--text-muted); margin-bottom: 12px;">
          –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ–∫–ª–∞–º—ã
        </div>
        <div class="ad-timer" id="adTimer">00:00</div>
      </div>

      <div class="wallet-actions">
        <button class="btn btn-wallet" id="playAdBtn">
          <svg class="icon"><use href="#icon-play"/></svg>
          –°–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∫–ª–∞–º—É
        </button>
        <button class="btn btn-outline" onclick="showPage('home')">
          <svg class="icon"><use href="#icon-arrow-left"/></svg>
          –ù–∞–∑–∞–¥
        </button>
      </div>
    </div>

    <!-- Wallet Page -->
    <div class="page" id="walletPage">
      <div class="header">
        <h2 style="display: flex; align-items: center; gap: 10px;">
          <svg class="icon icon-lg" style="color: var(--success-light);"><use href="#icon-wallet"/></svg>
          –ö–æ—à–µ–ª—ë–∫
        </h2>
      </div>

      <div class="card balance-card">
        <div class="balance-header">
          <div class="ton-icon">
            <svg class="icon" style="width: 28px; height: 28px;"><use href="#icon-diamond"/></svg>
          </div>
          <div>
            <div class="balance-label">–ë–∞–ª–∞–Ω—Å</div>
            <div class="balance-amount" id="balanceAmount">0</div>
          </div>
        </div>
        <div class="status-badge" id="walletStatus">
          –ö–æ—à–µ–ª—ë–∫ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω
        </div>
        <div class="wallet-address" id="walletAddressDisplay" style="display: none;"></div>
      </div>

      <div class="card">
        <div class="wallet-actions">
          <button class="btn btn-wallet" id="attachWalletBtn">
            <svg class="icon"><use href="#icon-link"/></svg>
            –ü—Ä–∏–≤—è–∑–∞—Ç—å –∫–æ—à–µ–ª—ë–∫
          </button>
          <button class="btn btn-outline" id="detachWalletBtn" disabled>
            <svg class="icon"><use href="#icon-unlink"/></svg>
            –û—Ç–≤—è–∑–∞—Ç—å –∫–æ—à–µ–ª—ë–∫
          </button>
          <button class="btn btn-danger" id="withdrawBtn" disabled>
            <svg class="icon"><use href="#icon-money"/></svg>
            –í—ã–≤–µ—Å—Ç–∏ –≤—Å—ë
          </button>
        </div>

        <p class="info-text">
          <svg class="icon" style="vertical-align: middle;"><use href="#icon-info"/></svg>
          –ü—Ä–∏ –≤—ã–≤–æ–¥–µ –±–∞–ª–∞–Ω—Å –æ–±–Ω—É–ª—è–µ—Ç—Å—è. –ü—Ä–∏–≤—è–∂–∏—Ç–µ TON –∫–æ—à–µ–ª—ë–∫ –¥–ª—è –≤—ã–≤–æ–¥–∞ —Å—Ä–µ–¥—Å—Ç–≤.
        </p>
      </div>

      <div class="wallet-actions">
        <button class="btn btn-outline" onclick="showPage('home')">
          <svg class="icon"><use href="#icon-arrow-left"/></svg>
          –ù–∞–∑–∞–¥ –Ω–∞ –≥–ª–∞–≤–Ω—É—é
        </button>
      </div>

      <div style="text-align: center; margin-top: 20px;">
        <a href="https://t.me/teppuseller" target="_blank" class="support-link">
          <svg class="support-icon icon"><use href="#icon-support"/></svg>
          <span>–ü–æ–¥–¥–µ—Ä–∂–∫–∞</span>
        </a>
      </div>
    </div>
  </div>

  <script>
    const tg = window.Telegram?.WebApp;
    if (tg) {
      try { tg.expand(); } catch(e) {}
    }

    // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Telegram
    const telegramUser = tg?.initDataUnsafe?.user;
    const userId = telegramUser?.id || null;
    const userName = telegramUser?.username || 'unknown';
    const firstName = telegramUser?.first_name || '';
    const lastName = telegramUser?.last_name || '';
    const initData = tg?.initData || '';

    // API –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
    const API_URL = 'http://localhost:3000/api'; // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    if (!userId) {
      alert('‚ùå –û—à–∏–±–∫–∞: –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞.');
      document.body.innerHTML = '<div style="text-align:center;padding:40px;color:#ef4444;">‚ö†Ô∏è –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞</div>';
      throw new Error('No Telegram user data');
    }

    // API —Ñ—É–Ω–∫—Ü–∏–∏
    async function apiRequest(endpoint, data = {}) {
      try {
        const response = await fetch(`${API_URL}${endpoint}`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ ...data, userId, initData })
        });
        
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        return await response.json();
      } catch (error) {
        console.error('API Error:', error);
        showToast('‚ùå –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º');
        return null;
      }
    }

    // –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Å–µ—Ä–≤–µ—Ä–∞
    async function loadUserData() {
      const result = await apiRequest('/user/get');
      if (result && result.success) {
        return result.data;
      }
      return null;
    }

    // –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
    async function updateUserData(updates) {
      const result = await apiRequest('/user/update', { updates });
      if (result && result.success) {
        return result.data;
      }
      return null;
    }

    // –ü–æ–ª—É—á–∏—Ç—å –±–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    function getUserBalance() {
      return currentUser ? currentUser.balance : 0;
    }

    // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    async function setUserBalance(amount) {
      const result = await apiRequest('/user/balance', { balance: amount });
      if (result && result.success) {
        currentUser.balance = amount;
        return true;
      }
      return false;
    }

    // –ü–æ–ª—É—á–∏—Ç—å –∫–æ—à–µ–ª–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    function getUserWallet() {
      return currentUser ? currentUser.walletAddress : null;
    }

    // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ—à–µ–ª–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    async function setUserWallet(address) {
      const result = await apiRequest('/user/wallet', { walletAddress: address });
      if (result && result.success) {
        currentUser.walletAddress = address;
        return true;
      }
      return false;
    }

    // –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ —Ä–µ–∫–ª–∞–º—ã –¥–ª—è –ø–∞–∫–µ—Ç–∞
    function getViewedForPack(packSize) {
      if (!currentUser || !currentUser.packProgress) return 0;
      return currentUser.packProgress[packSize] || 0;
    }

    // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ —Ä–µ–∫–ª–∞–º—ã –¥–ª—è –ø–∞–∫–µ—Ç–∞
    async function setViewedForPack(packSize, count) {
      const result = await apiRequest('/user/progress', { packSize, viewed: count });
      if (result && result.success) {
        if (!currentUser.packProgress) currentUser.packProgress = {};
        currentUser.packProgress[packSize] = count;
        return true;
      }
      return false;
    }

    // –ó–∞–≤–µ—Ä—à–∏—Ç—å –ø–∞–∫–µ—Ç
    async function completePackOnServer(packSize, reward) {
      const result = await apiRequest('/user/complete-pack', { packSize, reward });
      if (result && result.success) {
        currentUser.balance = result.balance;
        return true;
      }
      return false;
    }

    // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
    let currentUser = null;
    
    (async () => {
      currentUser = await loadUserData();
      if (!currentUser) {
        alert('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.');
        return;
      }
      console.log('‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω:', currentUser);
      
      // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –µ—Å–ª–∏ –Ω–∞—Ö–æ–¥–∏–º—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∫–æ—à–µ–ª—å–∫–∞
      if (currentPage === 'wallet') {
        refreshWallet();
      }
    })();

    let selectedPack = null;
    let currentPage = 'home';

    // Menu functionality
    const menuBtn = document.getElementById('menuBtn');
    const menuModal = document.getElementById('menuModal');
    const packOptions = document.querySelectorAll('.pack-option');
    const startWatchBtn = document.getElementById('startWatchBtn');
    const openWalletBtn = document.getElementById('openWalletBtn');

    function openMenu() {
      menuBtn.classList.add('active');
      menuModal.classList.add('active');
    }

    function closeMenu() {
      menuBtn.classList.remove('active');
      menuModal.classList.remove('active');
    }

    menuBtn.addEventListener('click', () => {
      if (menuBtn.classList.contains('active')) {
        closeMenu();
      } else {
        openMenu();
      }
    });

    menuModal.addEventListener('click', (e) => {
      if (e.target === menuModal) {
        closeMenu();
      }
    });

    packOptions.forEach(option => {
      option.addEventListener('click', () => {
        packOptions.forEach(o => o.classList.remove('selected'));
        option.classList.add('selected');
        selectedPack = Number(option.dataset.ads);
        startWatchBtn.disabled = false;
      });
    });

    startWatchBtn.addEventListener('click', () => {
      if (selectedPack) {
        localStorage.setItem(`${userKey}_selected_pack`, String(selectedPack));
        closeMenu();
        showPage('watch');
      }
    });

    openWalletBtn.addEventListener('click', () => {
      closeMenu();
      showPage('wallet');
    });

    // Page navigation
    function showPage(page) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById(page + 'Page').classList.add('active');
      currentPage = page;

      if (page === 'watch') initWatchPage();
      if (page === 'wallet') refreshWallet();
    }

    // Watch page
    function initWatchPage() {
      const pack = Number(localStorage.getItem(`${userKey}_selected_pack`) || 0);
      const reward = pack === 100 ? 2 : pack === 200 ? 4 : pack === 300 ? 6 : 0;
      let viewed = getViewedForPack(pack);

      document.getElementById('viewedCount').textContent = viewed;
      document.getElementById('targetCount').textContent = pack;
      document.getElementById('rewardAmount').textContent = reward;
      updateProgress(viewed, pack);

      const playBtn = document.getElementById('playAdBtn');
      const adPlaceholder = document.getElementById('adPlaceholder');
      const adMessage = document.getElementById('adMessage');
      const adTimer = document.getElementById('adTimer');

      playBtn.onclick = () => {
        playBtn.disabled = true;
        adPlaceholder.innerHTML = '<svg class="icon" style="width: 64px; height: 64px;"><use href="#icon-play"/></svg>';
        adMessage.textContent = '–†–µ–∫–ª–∞–º–∞ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ—Ç—Å—è...';
        
        let seconds = 6 + Math.floor(Math.random() * 3);
        adTimer.textContent = formatTime(seconds);

        const interval = setInterval(() => {
          seconds--;
          adTimer.textContent = formatTime(seconds);

          if (seconds <= 0) {
            clearInterval(interval);
            adPlaceholder.innerHTML = '<svg class="icon" style="width: 64px; height: 64px;"><use href="#icon-check"/></svg>';
            adMessage.textContent = '–†–µ–∫–ª–∞–º–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!';
            playBtn.disabled = false;
            adTimer.textContent = '00:00';

            viewed++;
            setViewedForPack(pack, viewed);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—â—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            const userData = getUserData();
            updateUserData({ totalAdsWatched: userData.totalAdsWatched + 1 });
            
            document.getElementById('viewedCount').textContent = viewed;
            updateProgress(viewed, pack);

            if (viewed >= pack) {
              completePackage(reward, pack);
            }

            setTimeout(() => {
              adPlaceholder.innerHTML = '<svg class="icon" style="width: 64px; height: 64px;"><use href="#icon-tv"/></svg>';
              adMessage.textContent = '–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ–∫–ª–∞–º—ã';
            }, 1500);
          }
        }, 1000);
      };
    }

    function updateProgress(viewed, total) {
      const percent = (viewed / total) * 100;
      document.getElementById('progressFill').style.width = percent + '%';
    }

    function formatTime(s) {
      const mm = String(Math.floor(s / 60)).padStart(2, '0');
      const ss = String(s % 60).padStart(2, '0');
      return mm + ':' + ss;
    }

    function completePackage(reward, pack) {
      const prevBalance = getUserBalance();
      const newBalance = prevBalance + reward;
      setUserBalance(newBalance);
      
      // –î–æ–±–∞–≤–ª—è–µ–º –ø–∞–∫–µ—Ç –≤ –∏—Å—Ç–æ—Ä–∏—é –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö
      const userData = getUserData();
      const completedPacks = userData.completedPacks || [];
      completedPacks.push({
        packSize: pack,
        reward: reward,
        completedAt: new Date().toISOString()
      });
      updateUserData({ completedPacks });
      
      clearPackProgress(pack);

      showToast(`üéâ –í—ã –∑–∞—Ä–∞–±–æ—Ç–∞–ª–∏ ${reward} TON!`);
      
      setTimeout(() => {
        showPage('wallet');
      }, 2000);
    }

    function showToast(message) {
      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.textContent = message;
      document.body.appendChild(toast);

      setTimeout(() => toast.classList.add('visible'), 100);
      setTimeout(() => {
        toast.classList.remove('visible');
        setTimeout(() => toast.remove(), 400);
      }, 3000);
    }

    // Wallet page
    function refreshWallet() {
      const balance = getUserBalance();
      const walletLinked = getUserWallet();

      document.getElementById('balanceAmount').textContent = balance;

      const statusEl = document.getElementById('walletStatus');
      const walletAddressDisplay = document.getElementById('walletAddressDisplay');
      const attachBtn = document.getElementById('attachWalletBtn');
      const detachBtn = document.getElementById('detachWalletBtn');
      const withdrawBtn = document.getElementById('withdrawBtn');

      if (walletLinked) {
        const shortAddress = walletLinked.substring(0, 10) + '...' + walletLinked.substring(walletLinked.length - 8);
        statusEl.innerHTML = '<svg class="icon" style="vertical-align: middle;"><use href="#icon-check"/></svg> –ö–æ—à–µ–ª—ë–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω';
        statusEl.className = 'status-badge status-connected';
        walletAddressDisplay.textContent = shortAddress;
        walletAddressDisplay.style.display = 'block';
        attachBtn.disabled = true;
        detachBtn.disabled = false;
        withdrawBtn.disabled = balance === 0;
      } else {
        statusEl.textContent = '–ö–æ—à–µ–ª—ë–∫ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω';
        statusEl.className = 'status-badge status-disconnected';
        walletAddressDisplay.style.display = 'none';
        attachBtn.disabled = false;
        detachBtn.disabled = true;
        withdrawBtn.disabled = true;
      }
    }

    document.getElementById('attachWalletBtn').addEventListener('click', () => {
      const walletAddress = prompt('–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ TON –∫–æ—à–µ–ª—å–∫–∞:');
      if (!walletAddress || walletAddress.trim() === '') return;
      
      const trimmedAddress = walletAddress.trim();
      setUserWallet(trimmedAddress);
      showToast(`‚úÖ –ö–æ—à–µ–ª—ë–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω`);
      refreshWallet();
    });

    document.getElementById('detachWalletBtn').addEventListener('click', () => {
      if (confirm('–û—Ç–≤—è–∑–∞—Ç—å –∫–æ—à–µ–ª—ë–∫?')) {
        setUserWallet(null);
        showToast('–ö–æ—à–µ–ª—ë–∫ –æ—Ç–≤—è–∑–∞–Ω');
        refreshWallet();
      }
    });

    document.getElementById('withdrawBtn').addEventListener('click', async () => {
      const balance = getUserBalance();
      if (!balance) {
        showToast('‚ö†Ô∏è –ë–∞–ª–∞–Ω—Å –ø—É—Å—Ç');
        return;
      }

      const walletAddress = getUserWallet();
      if (!walletAddress) {
        showToast('‚ö†Ô∏è –°–Ω–∞—á–∞–ª–∞ –ø—Ä–∏–≤—è–∂–∏—Ç–µ –∫–æ—à–µ–ª—ë–∫');
        return;
      }

      if (confirm(`–í—ã–≤–µ—Å—Ç–∏ ${balance} TON –Ω–∞ –∫–æ—à–µ–ª—ë–∫ ${walletAddress}?`)) {
        const withdrawBtn = document.getElementById('withdrawBtn');
        withdrawBtn.disabled = true;
        withdrawBtn.textContent = '–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞—è–≤–∫–∏...';

        try {
          const userData = getUserData();
          
          // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞—è–≤–∫—É –∞–¥–º–∏–Ω—É —á–µ—Ä–µ–∑ Telegram Bot API
          const botToken = '7625566873:AAEZYKgg9y-po0K8IplhiNnrCim4nsIq4_Y';
          const adminId = '7753372971';
          
          const message = `üîî –ù–û–í–ê–Ø –ó–ê–Ø–í–ö–ê –ù–ê –í–´–í–û–î\n\n` +
            `üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${firstName} ${lastName}\n` +
            `üÜî User ID: ${userId}\n` +
            `üì± Username: @${userName}\n\n` +
            `üí∞ –°—É–º–º–∞: ${balance} TON\n` +
            `üëõ –ö–æ—à–µ–ª—ë–∫: \`${walletAddress}\`\n\n` +
            `üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:\n` +
            `   ‚Ä¢ –í—Å–µ–≥–æ —Ä–µ–∫–ª–∞–º—ã: ${userData.totalAdsWatched}\n` +
            `   ‚Ä¢ –ü–∞–∫–µ—Ç–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–æ: ${userData.completedPacks.length}\n` +
            `   ‚Ä¢ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω: ${new Date(userData.registeredAt).toLocaleDateString('ru-RU')}\n\n` +
            `‚è∞ –í—Ä–µ–º—è –∑–∞—è–≤–∫–∏: ${new Date().toLocaleString('ru-RU')}`;

          const response = await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              chat_id: adminId,
              text: message,
              parse_mode: 'Markdown'
            })
          });

          if (response.ok) {
            setUserBalance(0);
            showToast(`‚úÖ –ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞! –û–∂–∏–¥–∞–π—Ç–µ –≤—ã–≤–æ–¥ ${balance} TON`);
            refreshWallet();
          } else {
            throw new Error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏');
          }
        } catch (error) {
          console.error('–û—à–∏–±–∫–∞:', error);
          showToast('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞—è–≤–∫–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.');
          withdrawBtn.disabled = false;
          withdrawBtn.textContent = '–í—ã–≤–µ—Å—Ç–∏ –≤—Å—ë';
        }
      }
    });

    // Initialize
    const savedPack = localStorage.getItem(`${userKey}_selected_pack`);
    if (savedPack) {
      selectedPack = Number(savedPack);
    }
  </script>
</body>
</html>